from flask import Flask, request, jsonify, redirect, Response
import requests
import re

app = Flask(__name__)


def sanitize_username(username):
    """Sanitize username input."""
    if not username or not isinstance(username, str):
        return None
    return re.sub(r'[^a-zA-Z0-9_-]', '', username.strip())

@app.route('/')
def index():
    return redirect("https://github.com/0xh7ml", code=302)

@app.route('/api', methods=['GET'])
def show_card():
    # Get and sanitize username
    username = sanitize_username(request.args.get('username'))
    if not username:
        return jsonify({'error': 'Invalid or missing username parameter'}), 400

    # Yogosha API call
    url = f'https://api.yogosha.com/api/researchers/{username}'
    headers = {'Content-Type': 'application/json'}
    
    try:
        response = requests.get(url, headers=headers, timeout=10)
        response.raise_for_status()
    
    except requests.RequestException as e:
        return jsonify({'error': 'Failed to fetch data from Yogosha API'}), 503

    if response.status_code == 200:
        try:
            res = response.json()
            data = {
                "totalReports": res.get("totalReports", 0),
                "username": res.get("username", "Unknown"),
                "averageReportsQuality": res.get("averageReportsQuality", 0),
                "allTime": {
                    "kudos": res.get("allTime", {}).get("kudos", 0),
                    "rank": res.get("allTime", {}).get("rank", "N/A")
                },
                "last30DaysRank": res.get("last30Days", {}).get("rank", "N/A"),
                "acceptanceRate": res.get("acceptanceRate", 0),
            }
        except (KeyError, TypeError, ValueError):
            return jsonify({'error': 'Invalid response from Yogosha API'}), 500
        

        encoded_image = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2MDAgNjAwIj48cGF0aCBkPSJNMzAwLDQ0LjU4QzE1OC45NCw0NC41OCw0NC41OCwxNTguOTQsNDQuNTgsMzAwUzE1OC45NCw1NTUuNDIsMzAwLDU1NS40Miw1NTUuNDIsNDQxLjA2LDU1NS40MiwzMDAsNDQxLjA2LDQ0LjU4LDMwMCw0NC41OFpNNDcyLjY5LDQ3Mi42OUEyNDQuMjIsMjQ0LjIyLDAsMCwxLDEyNy4zMSwxMjcuMzEsMjQ0LjIyLDI0NC4yMiwwLDAsMSw0NzIuNjksNDcyLjY5WiIgZmlsbD0iIzA0NTFiZiIvPjxwYXRoIGQ9Ik0xNjUuMDgsNDY4bC04LjU1LDMuODUtMS4xNC41NWE2LjkxLDYuOTEsMCwwLDAtLjcxLjM3Yy4wNi0uMTYuMTUtLjQxLjI1LS43NXMuMjItLjc1LjM0LTEuMjNsMi4zLTkuMTItMS43My0xLjQ1LTMuNCwxMy40Ni00Ljg3LDUuNzgsMS42OCwxLjQxLDQuODctNS43NywxMi42OS01LjY1WiIgZmlsbD0iIzA0NTFiZiIvPjxwYXRoIGQ9Ik0xNzYuNDcsNDc5LjQzYTQuNzEsNC43MSwwLDAsMC0uNDQtMi43NCw3LDcsMCwwLDAtNC45MS0zLjU2LDQuNzQsNC43NCwwLDAsMC0yLjc1LjQ0LDYuMjksNi4yOSwwLDAsMC0yLjMzLDIuMDVsLTUuNDEsNy40N0E2LjM1LDYuMzUsMCwwLDAsMTU5LjQsNDg2YTQuNzIsNC43MiwwLDAsMCwuNDQsMi43NCw3LjEyLDcuMTIsMCwwLDAsNC45MiwzLjU2LDQuNzIsNC43MiwwLDAsMCwyLjc0LS40NCw2LjI1LDYuMjUsMCwwLDAsMi4zMy0yLjA2bDUuNDItNy40N0E2LjQsNi40LDAsMCwwLDE3Ni40Nyw0NzkuNDNabS0zLDEuNTktNS40MSw3LjQ3YTMuOTIsMy45MiwwLDAsMS0yLjM2LDEuNywzLjMzLDMuMzMsMCwwLDEtMi42OC0uNzQsMy40LDMuNCwwLDAsMS0xLjUzLTIuMzEsMy44NywzLjg3LDAsMCwxLC44Ny0yLjc3bDUuNDEtNy40N2EzLjg3LDMuODcsMCwwLDEsMi4zNy0xLjcsMy45NCwzLjk0LDAsMCwxLDQuMiwzQTMuODMsMy44MywwLDAsMSwxNzMuNDksNDgxWiIgZmlsbD0iIzA0NTFiZiIvPjxwYXRoIGQ9Ik0xODkuMSw0OTEuMTZhNi4yNCw2LjI0LDAsMCwwLDEtMyw0Ljg4LDQuODgsMCwwLDAtLjY3LTIuNzYsNi4zNSw2LjM1LDAsMCwwLTIuMjMtMi4yLDYuNTYsNi41NiwwLDAsMC0zLTEsNC43OSw0Ljc5LDAsMCwwLTIuNzUuNjEsNi4wOSw2LjA5LDAsMCwwLTIuMiwyLjJsLTQuODUsNy44NWE2LDYsMCwwLDAtMSwyLjk1LDQuOCw0LjgsMCwwLDAsLjY3LDIuNzQsNi42LDYuNiwwLDAsMCwyLjI3LDIuMjEsNi40Niw2LjQ2LDAsMCwwLDMsMSw0Ljg3LDQuODcsMCwwLDAsMi43Ny0uNjQsNi40LDYuNCwwLDAsMCwyLjIyLTIuMjNsMi40Mi0zLjkzLTUuNDYtMy4zNy0xLjA1LDEuNywzLjYyLDIuMjQtMS4zOCwyLjIyYTMuOTIsMy45MiwwLDAsMS0yLjI5LDEuODksMy41LDMuNSwwLDAsMS0yLjc5LS41NSwzLjU3LDMuNTcsMCwwLDEtMS43Ni0yLjI1LDMuNzYsMy43NiwwLDAsMSwuNjEtMi44NWw0Ljg1LTcuODVhMy43NSwzLjc1LDAsMCwxLDIuMjgtMS44MywzLjYsMy42LDAsMCwxLDIuNzkuNTgsMy40NiwzLjQ2LDAsMCwxLDEuNzQsMi4yNSwzLjk0LDMuOTQsMCwwLDEtLjY2LDIuOVoiIGZpbGw9IiMwNDUxYmYiLz48cGF0aCBkPSJNMjA0LjA2LDQ5NS42MmE0LjcyLDQuNzIsMCwwLDAtLjgzLTIuNjUsNi4zNyw2LjM3LDAsMCwwLTIuMzgtMiw2LjI0LDYuMjQsMCwwLDAtMy0uNzksNC43Miw0LjcyLDAsMCwwLTIuNjUuODMsNi4zNyw2LjM3LDAsMCwwLTIsMi4zOGwtNC4yNiw4LjE4YTYuMjQsNi4yNCwwLDAsMC0uNzksMyw0LjcyLDQuNzIsMCwwLDAsLjgzLDIuNjUsNi40Niw2LjQ2LDAsMCwwLDIuMzgsMiw2LjM2LDYuMzYsMCwwLDAsMywuNzksNC42NSw0LjY1LDAsMCwwLDIuNjQtLjg0LDYuMjUsNi4yNSwwLDAsMCwyLTIuMzdsNC4yNi04LjE5QTYuMjQsNi4yNCwwLDAsMCwyMDQuMDYsNDk1LjYyWm0tMi43MSwyLTQuMjYsOC4xOWEzLjkyLDMuOTIsMCwwLDEtMi4wOCwyLDQsNCwwLDAsMS00LjYyLTIuNDEsMy44OSwzLjg5LDAsMCwxLC40Ni0yLjg3bDQuMjYtOC4xOGEzLjksMy45LDAsMCwxLDIuMDktMiw0LDQsMCwwLDEsNC42LDIuNEEzLjgyLDMuODIsMCwwLDEsMjAxLjM1LDQ5Ny42MloiIGZpbGw9IiMwNDUxYmYiLz48cGF0aCBkPSJNMjE4LjQ3LDUwNWE1LjEsNS4xLDAsMCwwLC4xLTQuMiw1Ljg3LDUuODcsMCwwLDAtMy4yNi0zLDYuNjMsNi42MywwLDAsMC0zLjA3LS42MSw0LjkyLDQuOTIsMCwwLDAtMi41OC44OCw1LjM0LDUuMzQsMCwwLDAtMS43NiwyLjI4LDUuNTMsNS41MywwLDAsMC0uMzMsMy42MSw1Ljg5LDUuODksMCwwLDAsMi4wOSwzLjE1bDIuMDcsMS43OWEzLjc0LDMuNzQsMCwwLDEsMS4zMSwyLDMuODMsMy44MywwLDAsMS0uMjUsMi4zOSwzLjIsMy4yLDAsMCwxLTEuOTQsMS44OSw0LjE0LDQuMTQsMCwwLDEtMy0uMjksNC40Myw0LjQzLDAsMCwxLTIuMzgtMiwzLjI3LDMuMjcsMCwwLDEsMC0yLjhsLTItLjg2YTUuNTYsNS41NiwwLDAsMC0uNDMsMyw1LDUsMCwwLDAsMS4yNSwyLjU4LDcuODgsNy44OCwwLDAsMCwyLjgsMS45Miw3LjIyLDcuMjIsMCwwLDAsMy4yLjY1LDUuMSw1LjEsMCwwLDAsMi42OS0uOTEsNS4yOSw1LjI5LDAsMCwwLDEuODItMi4zMSw1LjgxLDUuODEsMCwwLDAsLjM2LTMuNyw2LjExLDYuMTEsMCwwLDAtMi4wNS0zLjIybC0yLjA3LTEuNzhhMy44NCwzLjg0LDAsMCwxLTEuMy0yLjA2QTMuNjMsMy42MywwLDAsMSwyMTAsNTAxYTIuODUsMi44NSwwLDAsMSwxLjc3LTEuNzMsMy44OSwzLjg5LDAsMCwxLDIuNzMuMjksMy43MSwzLjcxLDAsMCwxLDIuMDcsMS44NywzLjI0LDMuMjQsMCwwLDEtLjA5LDIuNjVaIiBmaWxsPSIjMDQ1MWJmIi8+PHBvbHlnb24gcG9pbnRzPSIyMzMuMDIgNTA0LjggMjMwLjE5IDUxMy4wMSAyMjMuODEgNTEwLjgxIDIyNi42MyA1MDIuNiAyMjQuNTggNTAxLjkgMjE4LjA1IDUyMC44NSAyMjAuMSA1MjEuNTUgMjIzLjE1IDUxMi43IDIyOS41NCA1MTQuOSAyMjYuNDkgNTIzLjc1IDIyOC41NCA1MjQuNDYgMjM1LjA3IDUwNS41MSAyMzMuMDIgNTA0LjgiIGZpbGw9IiMwNDUxYmYiLz48cGF0aCBkPSJNMjMzLjQyLDUyNmwyLjE1LjU2LDIuNzEtNC45MSw2LjA2LDEuNiwwLDUuNjEsMi4xMi41NlY1MDguNjlsLTIuNzktLjc0Wm0xMS4xNi0xNmMwLC4yMy0uMDUuNzItLjA4LDEuNXMtLjA2LDEuNzQtLjA4LDIuODlsLS4wNiw2LjkxTDIzOS4xOCw1MjBsMy4zOC02Yy41NS0xLDEtMS44NiwxLjM2LTIuNTVTMjQ0LjQ5LDUxMC4yMiwyNDQuNTgsNTEwWiIgZmlsbD0iIzA0NTFiZiIvPjxwYXRoIGQ9Ik0yNzYuMzMsNTEzLjhhNi43Myw2LjczLDAsMCwwLTMuMTIuMzIsNC44Myw0LjgzLDAsMCwwLTIuMiwxLjYsNS4yMSw1LjIxLDAsMCwwLTEsMi42OSw1LjU1LDUuNTUsMCwwLDAsLjczLDMuNTQsNS45MSw1LjkxLDAsMCwwLDIuOTMsMi40MWwyLjUsMS4xMUEzLjY3LDMuNjcsMCwwLDEsMjc4LDUyN2EzLjc1LDMuNzUsMCwwLDEsLjQ2LDIuMzUsMy4xNSwzLjE1LDAsMCwxLTEuMywyLjM4LDQuMTcsNC4xNywwLDAsMS0yLjkyLjU5LDQuNDksNC40OSwwLDAsMS0yLjg3LTEuMjcsMy4yMiwzLjIyLDAsMCwxLS44MS0yLjY4bC0yLjE4LS4yNGE1LjU1LDUuNTUsMCwwLDAsLjQ3LDMsNSw1LDAsMCwwLDIsMi4xLDcuNjksNy42OSwwLDAsMCwzLjIzLDEsNyw3LDAsMCwwLDMuMjUtLjMyLDUsNSwwLDAsMCwyLjMxLTEuNjUsNS4yOSw1LjI5LDAsMCwwLDEuMDYtMi43NCw1LjcsNS43LDAsMCwwLS43My0zLjY0LDYsNiwwLDAsMC0yLjktMi40OGwtMi41MS0xLjFhMy45MSwzLjkxLDAsMCwxLTEuODQtMS41OSwzLjY0LDMuNjQsMCwwLDEtLjQ2LTIuMzEsMi44NSwyLjg1LDAsMCwxLDEuMTktMi4xOCwzLjkxLDMuOTEsMCwwLDEsMi43LS41MiwzLjc0LDMuNzQsMCwwLDEsMi41MiwxLjE5LDMuMjIsMy4yMiwwLDAsMSwuNjgsMi41NmwyLjE2LjI0YTUuMDcsNS4wNywwLDAsMC0xLjEzLTRBNS45MSw1LjkxLDAsMCwwLDI3Ni4zMyw1MTMuOFoiIGZpbGw9IiMwNDUxYmYiLz48cG9seWdvbiBwb2ludHM9IjI4NS4xNSA1MTYuOTcgMjkwLjc4IDUxNy4xNyAyOTAuMTEgNTM1LjIzIDI5Mi4yOCA1MzUuMzEgMjkyLjk0IDUxNy4yNSAyOTguNTQgNTE3LjQ2IDI5OC42MiA1MTUuNDYgMjg1LjIzIDUxNC45NiAyODUuMTUgNTE2Ljk3IiBmaWxsPSIjMDQ1MWJmIi8+PHBhdGggZD0iTTMxMy4zMyw1MjQuMjlhNS42NSw1LjY1LDAsMCwwLDEtMy41NSw2LDYsMCwwLDAtLjgzLTMsNSw1LDAsMCwwLTIuMTMtMS45Miw2LjMzLDYuMzMsMCwwLDAtMy4xNC0uNmwtNiwuMjEuNzEsMjAsMi4xNy0uMDgtLjMxLTguNjQsMy40My0uMTIsNC4zMiw4LjUsMi41Ny0uMDktNC42NC04LjcxQTUuMzEsNS4zMSwwLDAsMCwzMTMuMzMsNTI0LjI5Wm0tOC42Ny40OS0uMjYtNy40MywzLjg3LS4xNGEzLjU4LDMuNTgsMCwwLDEsMi43MS45MSw0LjE2LDQuMTYsMCwwLDEsLjE5LDUuNDIsMy41OCwzLjU4LDAsMCwxLTIuNjQsMS4xMVoiIGZpbGw9IiMwNDUxYmYiLz48cG9seWdvbiBwb2ludHM9IjMyNi41NSA1MzEuOTcgMzI0LjgyIDUxNS45NyAzMjguOTIgNTE1LjUzIDMyOC43IDUxMy41NiAzMTguMjggNTE0LjY5IDMxOC40OSA1MTYuNjYgMzIyLjYxIDUxNi4yMSAzMjQuMzQgNTMyLjIxIDMyMC4yMiA1MzIuNjUgMzIwLjQ0IDUzNC42MiAzMzAuODYgNTMzLjQ5IDMzMC42NSA1MzEuNTIgMzI2LjU1IDUzMS45NyIgZmlsbD0iIzA0NTFiZiIvPjxwb2x5Z29uIHBvaW50cz0iMzQ1Ljg0IDUxMC42MSAzNDMuNDkgNTExLjA0IDM0MC42OSA1MjAuNDEgMzM3LjQ1IDUyMSAzMzUuODggNTEyLjQ0IDMzMy43NSA1MTIuODQgMzM3LjM3IDUzMi41NSAzMzkuNSA1MzIuMTYgMzM3LjggNTIyLjg5IDM0MC45OSA1MjIuMzEgMzQ3LjI1IDUzMC43MyAzNDkuNzQgNTMwLjI4IDM0Mi43NSA1MjAuOTUgMzQ1Ljg0IDUxMC42MSIgZmlsbD0iIzA0NTFiZiIvPjxwb2x5Z29uIHBvaW50cz0iMzU2LjE0IDUyNi42OCAzNTQuMjQgNTE5LjQxIDM2Mi4xNSA1MTcuMzQgMzYxLjY2IDUxNS40NSAzNTMuNzQgNTE3LjUyIDM1Mi4wNyA1MTEuMTIgMzYwLjkyIDUwOC44MSAzNjAuNDIgNTA2Ljg5IDM0OS40NyA1MDkuNzUgMzU0LjU0IDUyOS4xNSAzNjUuNDkgNTI2LjI4IDM2NC45OSA1MjQuMzcgMzU2LjE0IDUyNi42OCIgZmlsbD0iIzA0NTFiZiIvPjxwb2x5Z29uIHBvaW50cz0iMzkzLjE0IDUwNC4yOSAzODUuMDkgNTA3LjczIDM4Mi4zMiA1MDEuMjcgMzkxLjA4IDQ5Ny41MiAzOTAuMyA0OTUuNjggMzc5LjU3IDUwMC4yNyAzODcuNDYgNTE4LjcyIDM4OS40OCA1MTcuODYgMzg1LjkyIDUwOS41MyAzOTMuOTIgNTA2LjExIDM5My4xNCA1MDQuMjkiIGZpbGw9IiMwNDUxYmYiLz48cGF0aCBkPSJNNDA2LjQ5LDQ5My41NmE2LjI5LDYuMjksMCwwLDAtMi0yLjM4LDQuNjYsNC42NiwwLDAsMC0yLjY1LS44NCw3LDcsMCwwLDAtNS4zOSwyLjc5LDQuNzIsNC43MiwwLDAsMC0uODMsMi42NSw2LjI2LDYuMjYsMCwwLDAsLjc4LDNsNC4yNSw4LjE5YTYuMzUsNi4zNSwwLDAsMCwyLDIuMzgsNC44MSw0LjgxLDAsMCwwLDIuNjUuODQsNy4wNiw3LjA2LDAsMCwwLDUuMzktMi44LDQuNzgsNC43OCwwLDAsMCwuODQtMi42NCw2LjM2LDYuMzYsMCwwLDAtLjc5LTNabTIuNzgsMTIuMDVhMy4zOCwzLjM4LDAsMCwxLTEuODcsMi4wNywzLjQzLDMuNDMsMCwwLDEtMi43NS4zMywzLjksMy45LDAsMCwxLTIuMDktMmwtNC4yNC04LjE5YTMuOSwzLjksMCwwLDEtLjQ2LTIuODgsMy40MiwzLjQyLDAsMCwxLDEuODYtMi4wNSwzLjM1LDMuMzUsMCwwLDEsMi43NS0uMzMsMy44NSwzLjg1LDAsMCwxLDIuMDksMmw0LjI0LDguMkEzLjg2LDMuODYsMCwwLDEsNDA5LjI3LDUwNS42MVoiIGZpbGw9IiMwNDUxYmYiLz48cGF0aCBkPSJNNDIyLDQ4OC42OGE1LjcsNS43LDAsMCwwLS45MS0zLjU3LDUuOTMsNS45MywwLDAsMC0yLjE5LTIuMTgsNS4xMSw1LjExLDAsMCwwLTIuOC0uNjIsNi41Myw2LjUzLDAsMCwwLTMsMUw0MDgsNDg2LjVsMTAuNTEsMTcuMDgsMS44NS0xLjE0LTQuNTMtNy4zNywyLjkyLTEuOCw3Ljk0LDUuMjcsMi4yLTEuMzUtOC4zNC01LjI4QTUuMzcsNS4zNywwLDAsMCw0MjIsNDg4LjY4Wm0tMi4yNS40MWEzLjU4LDMuNTgsMCwwLDEtMS43NCwyLjI3bC0zLjMsMi0zLjktNi4zNCwzLjMtMmEzLjQ1LDMuNDUsMCwwLDEsNS4wNywxLjIzQTMuNjYsMy42NiwwLDAsMSw0MTkuNzksNDg5LjA5WiIgZmlsbD0iIzA0NTFiZiIvPjxwYXRoIGQ9Ik00MzcuNDksNDg0LjM2YTMuODksMy44OSwwLDAsMSwuODcsMi44NSwzLjUyLDMuNTIsMCwwLDEtMS41NywyLjM3LDMuNTgsMy41OCwwLDAsMS0yLjc1Ljc2LDMuNzQsMy43NCwwLDAsMS0yLjQtMS42NWwtNS40LTcuNDhhMy43NSwzLjc1LDAsMCwxLS44Mi0yLjgxQTMuNjEsMy42MSwwLDAsMSw0MjcsNDc2YTMuNSwzLjUsMCwwLDEsMi43NC0uNzQsMy44OSwzLjg5LDAsMCwxLDIuNDMsMS43MmwxLjc2LTEuMjdhNi4yNiw2LjI2LDAsMCwwLTIuMzgtMi4wOCw0LjkyLDQuOTIsMCwwLDAtMi44LS40Myw2LjQ1LDYuNDUsMCwwLDAtMi45LDEuMjIsNi42NSw2LjY1LDAsMCwwLTIuMSwyLjM3LDQuODMsNC44MywwLDAsMC0uNDgsMi43Nyw2LjE0LDYuMTQsMCwwLDAsMS4xOSwyLjg4bDUuNCw3LjQ4YTYuMjMsNi4yMywwLDAsMCwyLjM1LDIsNC44LDQuOCwwLDAsMCwyLjc5LjQyLDYuNTMsNi41MywwLDAsMCwyLjkxLTEuMjVBNi4zNyw2LjM3LDAsMCwwLDQ0MCw0ODguOGE1LDUsMCwwLDAsLjQ3LTIuODEsNi4zNCw2LjM0LDAsMCwwLTEuMjItMi45WiIgZmlsbD0iIzA0NTFiZiIvPjxwb2x5Z29uIHBvaW50cz0iNDQ3LjYxIDQ4MC45MSA0NDIuNzcgNDc1LjE0IDQ0OS4wNCA0NjkuODggNDQ3Ljc4IDQ2OC4zOSA0NDEuNTEgNDczLjY1IDQzNy4yNiA0NjguNTggNDQ0LjI2IDQ2Mi43IDQ0Mi45OSA0NjEuMTkgNDM0LjMzIDQ2OC40NiA0NDcuMjIgNDgzLjgxIDQ1NS44OCA0NzYuNTQgNDU0LjYxIDQ3NS4wMiA0NDcuNjEgNDgwLjkxIiBmaWxsPSIjMDQ1MWJmIi8+PHBhdGggZD0iTTMwMCwyMDMuNDdhNTAuNzIsNTAuNzIsMCwxLDAtNTAuNzItNTAuNzJBNTAuNzcsNTAuNzcsMCwwLDAsMzAwLDIwMy40N1ptMC05OC42M2E0Ny45Miw0Ny45MiwwLDEsMS00Ny45Miw0Ny45MUE0OCw0OCwwLDAsMSwzMDAsMTA0Ljg0WiIgZmlsbD0iIzA0NTFiZiIvPjxwYXRoIGQ9Ik0zMDAsMTkxLjkzYTM5LjE4LDM5LjE4LDAsMSwwLTM5LjE4LTM5LjE4QTM5LjIzLDM5LjIzLDAsMCwwLDMwMCwxOTEuOTNabTAtNzUuNTZhMzYuMzgsMzYuMzgsMCwxLDEtMzYuMzgsMzYuMzhBMzYuNDIsMzYuNDIsMCwwLDEsMzAwLDExNi4zN1oiIGZpbGw9IiMwNDUxYmYiLz48cGF0aCBkPSJNMjgwLjI2LDEzNy40MmwxMy42NSw3Ljg4LDMuNTgsMi4wNmE0LjYxLDQuNjEsMCwwLDAsNC42NSwwbDMuNTgtMi4wNiwxMy42NS03Ljg4YTQuNjUsNC42NSwwLDAsMCwwLTguMDZsLTcuMTYtNC4xNGE0LjY3LDQuNjcsMCwwLDAtNC42NSwwbC03Ljc0LDQuNDctNy43NS00LjQ3YTQuNjcsNC42NywwLDAsMC00LjY1LDBsLTcuMTYsNC4xM2E0LjcsNC43LDAsMCwwLTEuMjMsMWMtLjA3LjA5LS4xNS4xOC0uMjIuMjhhNC42NCw0LjY0LDAsMCwwLS43NywzLjdBNC43MSw0LjcxLDAsMCwwLDI4MC4yNiwxMzcuNDJabS44Mi01LjEyLjA5LS4xMWEyLjE0LDIuMTQsMCwwLDEsLjQ5LS40MWw3LjE2LTQuMTNhMS44MywxLjgzLDAsMCwxLC45My0uMjUsMS43NywxLjc3LDAsMCwxLC45Mi4yNWw5LjE1LDUuMjgsOS4xNC01LjI4YTEuODMsMS44MywwLDAsMSwuOTMtLjI1LDEuNzcsMS43NywwLDAsMSwuOTIuMjVsNy4xNiw0LjEzYTEuODUsMS44NSwwLDAsMSwwLDMuMjFsLTEzLjY1LDcuODgtMy41OCwyLjA3YTEuODcsMS44NywwLDAsMS0uOTIuMjUsMS45MywxLjkzLDAsMCwxLS45My0uMjVsLTMuNTgtMi4wN0wyODEuNjYsMTM1YTEuODUsMS44NSwwLDAsMS0uODgtMS4yMUExLjg5LDEuODksMCwwLDEsMjgxLjA4LDEzMi4zWiIgZmlsbD0iIzA0NTFiZiIvPjxwYXRoIGQ9Ik0zMDUuNzYsMTUzLjQ1YTQuNjgsNC42OCwwLDAsMC0yLjMyLDR2MTkuNzhhNC42Niw0LjY2LDAsMCwwLDcsNGw3LjE2LTQuMTRhNC42Niw0LjY2LDAsMCwwLDIuMzItNFYxNjQuM2w3LjczLTQuNDZhNC42Niw0LjY2LDAsMCwwLDIuMzMtNHYtOC4yN2E0LjY1LDQuNjUsMCwwLDAtNC42NS00LjY1LDQuNzUsNC43NSwwLDAsMC0yLjMzLjYybC0xMy42NCw3Ljg4Wm0xOC42Mi03LjUxYTEuODMsMS44MywwLDAsMSwuOTMtLjI1LDEuNzcsMS43NywwLDAsMSwuOTIuMjUsMS44NCwxLjg0LDAsMCwxLC45MywxLjZ2OC4yN2ExLjg2LDEuODYsMCwwLDEtLjkzLDEuNjFsLTkuMTMsNS4yN3YxMC40M2ExLjg1LDEuODUsMCwwLDEtLjkyLDEuNjFMMzA5LDE3OC44NmExLjg1LDEuODUsMCwwLDEtMi43OC0xLjZWMTU3LjQ4YTEuODUsMS44NSwwLDAsMSwuOTItMS42bDMuNTgtMi4wN1oiIGZpbGw9IiMwNDUxYmYiLz48cGF0aCBkPSJNMjgwLjEsMTcyLjQ1YTQuNjUsNC42NSwwLDAsMCwyLjMzLDRsNy4xNSw0LjE0YTQuNjksNC42OSwwLDAsMCw0LjY2LDAsNC42OCw0LjY4LDAsMCwwLDIuMzItNFYxNTYuODFhNC42Nyw0LjY3LDAsMCwwLTIuMzItNGwtMy41OC0yLjA2TDI3NywxNDIuODRhNC42MSw0LjYxLDAsMCwwLTIuMzItLjYyLDQuOCw0LjgsMCwwLDAtMS41NS4yNiw0LjY1LDQuNjUsMCwwLDAtMi43OSwyLjd2MGwwLC4wOGE0LjQ2LDQuNDYsMCwwLDAtLjI4LDEuNTh2OC4yNmE0LjY2LDQuNjYsMCwwLDAsMi4zMyw0bDcuNzMsNC40NlptLTYuMzMtMTUuNzFhMS44NCwxLjg0LDAsMCwxLS45My0xLjZ2LTguMjZhMS45LDEuOSwwLDAsMSwuMTEtLjYzbDAtLjA1QTEuODIsMS44MiwwLDAsMSwyNzQuNywxNDVhMS43NywxLjc3LDAsMCwxLC45Mi4yNWwxMy42NCw3Ljg3LDMuNTgsMi4wN2ExLjg1LDEuODUsMCwwLDEsLjkyLDEuNnYxOS43OGExLjg1LDEuODUsMCwwLDEtMi43OCwxLjZsLTcuMTYtNC4xM2ExLjg1LDEuODUsMCwwLDEtLjkyLTEuNjFWMTYyWiIgZmlsbD0iIzA0NTFiZiIvPjxwYXRoIGQ9Ik01MDYuNTgsMzAxLjA4YTEuNCwxLjQsMCwwLDAtMS40LTEuMzloMGExLjQxLDEuNDEsMCwwLDAtMS4zOSwxLjQxdjEuNjhjMCwxMTItOTEuMTMsMjAzLjE0LTIwMy4xNCwyMDMuMTRTOTcuNSw0MTQuNzksOTcuNSwzMDIuNzhjMC0uOTIsMC0xLjg0LDAtMi43NmExLjQsMS40LDAsMCwwLTEuMzgtMS40MmgwYTEuNDEsMS40MSwwLDAsMC0xLjQsMS4zOGMwLC45MywwLDEuODYsMCwyLjgsMCwxMTMuNTUsOTIuMzksMjA1Ljk0LDIwNiwyMDUuOTRzMjA1Ljk0LTkyLjM5LDIwNS45NC0yMDUuOTRaIiBmaWxsPSIjMDQ1MWJmIi8+PHBhdGggZD0iTTExNy4wOSwxNjQuMDcsMjI5LjU2LDI3Ni44MWgyMi41MWEzOS41MiwzOS41MiwwLDAsMSwzLjItMTEuOTIsNjEuOTQsNjEuOTQsMCwwLDEsOS4xOS0xNC44MmwuNzEtLjgxLDM1LjQ4LTcuNzYsMzUuNyw3LjgxLjczLDEuMDhjLjUuNzMsOC42MSwxMi44OCw5Ljg5LDI2LjQyaDI0Ljc5TDQ4NC4yMSwxNjQuMTJsMi4zLDIuNzRjLjguOTQsMTkuNTgsMjMuMzcsMjcsNDYsMy43NSwxMS40OSw1LDIzLjY0LDMuNzMsMzcuMTYtMS4xNywxMi44My00LjU2LDI2LjY4LTEwLjM0LDQyLjMydjBhMTYyLjU0LDE2Mi41NCwwLDAsMS0yMy4xOCw0MS44MywxNDguNDMsMTQ4LjQzLDAsMCwxLTI4LjQ2LDI4Yy0xOC40LDEzLjc3LTM2LjczLDIxLjMtNTMuODEsMjcuMzktMTQuODUsNS4zMS0zMy42NSwxMC4zNy00OC4wNSwxNGwyMS4xLDM2Ljg1LTEsMS42NGExNTcuMTksMTU3LjE5LDAsMCwxLTIwLjY4LDI2LjY5LDEwNy43NywxMDcuNzcsMCwwLDEtMjIuOTMsMTguNDhjLTkuODIsNS43LTE5LjY1LDguNTktMjkuMjQsOC41OXMtMTkuNDMtMi44OS0yOS4yNC04LjU5YTEwNy41MywxMDcuNTMsMCwwLDEtMjIuOTMtMTguNDgsMTU3LjU3LDE1Ny41NywwLDAsMS0yMC42OS0yNi42OWwtMS0xLjY0TDI0OCw0MDMuNTFjLTE0LjQtMy41OS0zMy4yMS04LjY2LTQ4LjA4LTE0LTE3LjA3LTYuMDktMzUuNC0xMy42Mi01My44LTI3LjM5YTE0OS4wNiwxNDkuMDYsMCwwLDEtMjguNDctMjgsMTYyLjg1LDE2Mi44NSwwLDAsMS0yMy4xNy00MS44M2wwLDBjLTUuNzgtMTUuNjQtOS4xNi0yOS40OS0xMC4zNC00Mi4zMi0xLjI0LTEzLjUyLDAtMjUuNjgsMy43My0zNy4xNiw3LjQtMjIuNjcsMjYuMTgtNDUuMSwyNy00NmwyLjMxLTIuNzRtNjkuMDYsMTA1LTY5LTk0Ljc3QzExMiwxODEsMTAwLjY0LDE5Ni43LDk0Ljg5LDIxMi40Nmw5MS4yNiw1Ni42NW0yMjksLjA1LDkxLjI2LTU2LjY1Yy01Ljc1LTE1Ljc4LTE3LjEzLTMxLjQ4LTIyLjI4LTM4LjEybC02OSw5NC43N20tMjE1LjI3LDcuNjVoMjAuNDFsLTc1LjQ2LTc1LjY0LDU1LjA1LDc1LjY0bTE4MS4xNywwaDIwLjQybDU1LTc1LjYyTDM4MSwyNzYuODFNOTkuNzIsMjg3LjY2bDg5LjA3LTkuMThMOTIuODYsMjE4LjkzYy01LjE1LDE5LjMyLTIuOTQsNDEuMzUsNi44Niw2OC43M200MDEuODYuMDZjOS44LTI3LjM5LDEyLTQ5LjQyLDYuODYtNjguNzRMNDEyLjUsMjc4LjUzbDg5LjA4LDkuMTltLTIxNS42NC0xOWgwbDcuMTcsOC4wOSwyLjQsMi43aDBsMy40MywzLjg2LDEuNzEsMS45MywxLjcxLTEuOTMsMy40My0zLjg2aDBsMi4zOS0yLjcsNy4xNy04LjA5aDBsMTIuODQtMTQuNDctMjcuNTQtNi0yNy41NSw2LDEyLjg0LDE0LjQ3bTExLjQyLDQ0LjgzVjI5MS40OWwtNC4wOC00LjU5YTExLjU0LDExLjU0LDAsMCwxLTIwLjkyLTYuNzMsMTEuMjksMTEuMjksMCwwLDEsLjUtMy4zNiwxMS42MSwxMS42MSwwLDAsMSw1LjQ4LTYuNzZMMjY3LjEsMjU3LjM4Yy0yLjg2LDQtNy40NywxMS41MS04LjQsMTkuNDNhMjEuNTUsMjEuNTUsMCwwLDAsLjE5LDYuNTYsMTgsMTgsMCwwLDAsMy41NCw3LjczYzkuNjgsMTIuMzMsMjcsMTkuNjEsMzQuOTMsMjIuNDVtMjAtMjEuODNBMTEuNTYsMTEuNTYsMCwwLDEsMzA4LDI4Ni45bC00LjA4LDQuNTlWMzEzLjZjOC4yOC0yLjg1LDI2LjY4LTEwLjI5LDMzLjgtMjIuMjFhMjAuMDYsMjAuMDYsMCwwLDAsMi42NS04LDI4LjIyLDI4LjIyLDAsMCwwLDAtNi41NmMtLjg2LTcuNTctNC4yMy0xNC44My02LjUyLTE5TDMyMywyNzAuMDVhMTEuNTUsMTEuNTUsMCwwLDEsNiwxMC4xMiwxMS4yNSwxMS4yNSwwLDAsMS0uNDYsMy4yLDExLjU1LDExLjU1LDAsMCwxLTExLjA5LDguMzVtMjMuMyw4OS43LDU2LjYxLTk4LjA1SDM3NC40OGwtNTcuMTQsNTcuMjYsMjMuMzUsNDAuNzltLTgwLjA5LDBMMjg0LDM0MC42M2wtNTcuMTMtNTcuMjZIMjA0bDU2LjYxLDk4LjA1bS02MywuMzItMi40NS05Ny4zMS05Myw5LjU5YzI0LjE3LDU5LDcxLjIyLDc4Ljg4LDk1LjQzLDg3LjcybTIwNi4xMy4wNUM0MjcuOTMsMzczLDQ3NSwzNTMsNDk5LjE0LDI5NC4wN2wtOTMtOS41OS0yLjQ2LDk3LjMxTTM1MCwzOTcuNjNjMTMuNzgtMy40MSwzMi4yLTguMyw0Ny4xMS0xMy40N2wyLjMtOTEuMjZMMzQ0LjQ3LDM4OGw1LjUsOS42MW0tOTguNjIsMCw1LjQ4LTkuNTctNTQuOTItOTUuMTEsMi4zLDkxLjE5YzE0LjkyLDUuMTgsMzMuMzUsMTAuMDgsNDcuMTQsMTMuNDltNDkuMyw1My4yTDMzNi44OSwzODhsLTI0LjM2LTQyLjU2LTExLjg4LDExLjkxTDI5OC4zMiwzNTVsLTkuNTYtOS41OEwyNjQuNCwzODhsMzYuMjUsNjIuNzhtLTQyLjYsMTguMTUsMTkuNTgtNDQuODktNy43Ni0xMy40NEwyMzQuOSw0NDFhMTU3LjQ4LDE1Ny40OCwwLDAsMCwxOC40LDIzLjI1YzEuNDcsMS41MiwzLjA2LDMuMDksNC43NSw0LjY2bTg1LjE5LDBjMS42OS0xLjU3LDMuMjgtMy4xNCw0Ljc2LTQuNjZBMTU3LjQ4LDE1Ny40OCwwLDAsMCwzNjYuNCw0NDFsLTM1LTMwLjQyLTcuNzYsMTMuNDQsMTkuNTcsNDQuODltLTQ1Ljg4LDIwLjE3VjQ1OC4yM2wtMTUuNjUtMjcuMTEtMTguNDcsNDIuMzVjOS40Nyw3Ljc3LDIxLjI4LDE0LjYyLDM0LjEyLDE1LjY0bTYuNTcsMGMxMi44NS0xLDI0LjY1LTcuODcsMzQuMTMtMTUuNjNsLTE4LjQ3LTQyLjM2LTE1LjY2LDI3LjExdjMwLjg4bS0xODctMzI5LjE4LTIsMi4zNEwxMTIuNjQsMTY1Yy0uODEsMS0xOS45MiwyMy44LTI3LjQ5LDQ3LTMuODcsMTEuODUtNS4xMywyNC4zOC0zLjg2LDM4LjI5LDEuMiwxMy4wOCw0LjY0LDI3LjE1LDEwLjUxLDQzYTE2NS40OSwxNjUuNDksMCwwLDAsMjMuNiw0Mi42LDE1MS40MiwxNTEuNDIsMCwwLDAsMjksMjguNDljMTguNywxNCwzNy4yNiwyMS42Myw1NC41NCwyNy43OSwxNCw1LDMxLjQ1LDkuNzYsNDQuNzUsMTMuMTRMMjI0LjQsNDM5bC0uOCwxLjQxLjgyLDEuNCwxLDEuNjRhMTYwLjE0LDE2MC4xNCwwLDAsMCwyMS4wOCwyNy4yMSwxMTAsMTEwLDAsMCwwLDIzLjU0LDE5YzEwLjI1LDUuOTUsMjAuNTYsOSwzMC42NSw5czIwLjQtMywzMC42NC05YTExMC4zMiwxMTAuMzIsMCwwLDAsMjMuNTQtMTksMTYwLjUxLDE2MC41MSwwLDAsMCwyMS4wOS0yNy4yMWwxLTEuNjQuODItMS40LS44MS0xLjQxLTE5LjI2LTMzLjY1YzEzLjI5LTMuMzgsMzAuNzUtOC4xNSw0NC43My0xMy4xNCwxNy4yNy02LjE2LDM1Ljg0LTEzLjgsNTQuNTMtMjcuNzlhMTUwLjksMTUwLjksMCwwLDAsMjktMjguNDksMTY1Ljc2LDE2NS43NiwwLDAsMCwyMy41OC00Mi41NGM1Ljg5LTE1LjkzLDkuMzItMzAsMTAuNTItNDMuMDksMS4yOC0xMy45MSwwLTI2LjQzLTMuODUtMzguMjktNy41Ny0yMy4xOC0yNi42OS00Ni0yNy41LTQ3bC0yLjMtMi43My0yLTIuMzQtMi4xNSwyLjE2TDM3MC42LDI3NEgzNDkuNDRjLTItMTMtOS4xNy0yMy45Mi0xMC0yNS4xOWwtLjczLTEuMDktLjYzLS45Mi0xLjA5LS4yNC0zNS43LTcuOC0uNi0uMTQtLjYuMTQtMzUuNDgsNy43NS0uOS4yLS42LjY5LS43MS44MWE2NC42MSw2NC42MSwwLDAsMC05LjY2LDE1LjU2QTQ0LjcyLDQ0LjcyLDAsMCwwLDI0OS42MSwyNzRIMjMwLjcyTDExOS4wNywxNjIuMDlsLTIuMTUtMi4xNlpNOTguMzMsMjExLjNDMTAzLjM5LDE5OC41NiwxMTIsMTg2LDExNy4xMywxNzlsNTguMzMsODAuMTRMOTguMzMsMjExLjNabTMyNy41MSw0Ny45Myw1OC4zMy04MC4xNEM0ODkuMzMsMTg2LDQ5Ny45LDE5OC42LDUwMywyMTEuMzVsLTc3LjEyLDQ3Ljg4Wk0xMDEuNjIsMjg0LjY1Yy04LjQyLTI0LjI0LTEwLjY1LTQzLjg5LTYuOTQtNjEuM2w4NS42Nyw1My4xOS03OC43Myw4LjExWm0zMTkuMzItOC4wNiw4NS42OC01My4xOWMzLjcxLDE3LjQxLDEuNDcsMzcuMDYtNi45NSw2MS4zbC03OC43My04LjExWk0zODcuNzksMjc0LDQzMywyMjguNjYsNDAwLDI3NFpNMjAxLjMsMjc0bC0zMy00NS4zNEwyMTMuNTMsMjc0Wm03Ny4wNy0xOCwyMi4yOC00Ljg3TDMyMi45MywyNTZsLTkuNjcsMTAuOTFMMzA2LjA5LDI3NWwtMi40LDIuNy0zLDMuNDMtMy0zLjQzLTIuMzktMi43TDI4OCwyNjYuODdsLTIuMSwxLjg1LDIuMS0xLjg1TDI3OC4zNywyNTZabTE2LjE5LDUzLjUzYy04LjIyLTMuMy0yMi0xMC0yOS45Mi0yMC4xMmExNS4wNSwxNS4wNSwwLDAsMS0zLTYuNTMsMTksMTksMCwwLDEtLjE2LTUuNzFjLjY3LTUuNywzLjQ5LTExLjI4LDUuOTMtMTUuMThsNi44LDcuNjZhMTQuMzQsMTQuMzQsMCwwLDAsMTksMjEuNDVsMS4zMywxLjV2MTYuOTNabTMyLjUzLTM5Ljg4LDYuMTEtNi44OWE0OC41Nyw0OC41NywwLDAsMSw0LjM4LDE0LjQsMjYuMDcsMjYuMDcsMCwwLDEsMCw1LjkyLDE3LjMsMTcuMywwLDAsMS0yLjI3LDYuOTFjLTUuNzcsOS42Ny0yMCwxNi4zNC0yOC42LDE5LjY1di0xN2wxLjMzLTEuNWExNC4zMywxNC4zMywwLDAsMCwyMy4xMS02LjkxLDE0LjE4LDE0LjE4LDAsMCwwLC41Ny00LDE0LjM5LDE0LjM5LDAsMCwwLS42Mi00LjE4LDE0LjU2LDE0LjU2LDAsMCwwLTQtNi4zOFptNDguNTUsMTYuNTZoMTYuODFMMzQwLjcsMzc1LjgxLDMyMC44MywzNDEuMWw1NC44MS01NC45M1ptLTE2Ni44LDBoMTYuODNsNTQuNzksNTQuOTMtMTkuODcsMzQuNzEtNTEuNzUtODkuNjRaTTEwNi4yMSwyOTYuNDFsODYuMi04Ljg4LDIuMjcsOTAuMTNjLTI4LjU2LTEwLjkxLTY2LjcyLTMxLjM5LTg4LjQ3LTgxLjI1Wm0zMDAuNDEsODEuMzEsMi4yNy05MC4xNCw4Ni4yLDguODhjLTIxLjc2LDQ5Ljg3LTU5LjkxLDcwLjM0LTg4LjQ3LDgxLjI2Wk0zNDcuNywzODhsNDguNjEtODQuMi0yLDc4LjMxYy0xMy45NCw0LjcyLTMwLjYsOS4xNy00MywxMi4yNkwzNDcuNywzODhaTTIwNywzODIuMDlsLTItNzguMjVMMjUzLjYsMzg4LDI1MCwzOTQuMzZjLTEyLjM5LTMuMS0yOS4wNi03LjU1LTQzLTEyLjI3Wk0yNjcuNjMsMzg4bDIxLjc0LTM4LDcsNywyLjMyLDIuMzMsMiwyLDItMiw5LjI5LTkuMzEsMjEuNzQsMzgtMzMsNTcuMTktMzMtNTcuMTlabS0yOSw1My41M0wyNjkuMTQsNDE1bDUuMzYsOS4yOC0xNy40MSwzOS45MWMtLjYtLjYtMS4xOS0xLjItMS43OC0xLjgxYTE1NS45NCwxNTUuOTQsMCwwLDEtMTYuNzMtMjAuOFptODguMjItMTcuMyw1LjM2LTkuMjgsMzAuNTUsMjYuNThBMTU1LjEyLDE1NS4xMiwwLDAsMSwzNDYsNDYyLjMzYy0uNTguNjEtMS4xOCwxLjIxLTEuNzgsMS44MWwtMTcuNC0zOS45MVptLTYwLjE0LDQ4LjQsMTUuNC0zNS4zMUwyOTQuNTYsNDU5djI3Yy05LTEuNC0xOC4zOS01Ljg3LTI3LjktMTMuMzNaTTMwNi43Myw0NTlsMTIuNTEtMjEuNjYsMTUuMzksMzUuMzFjLTkuNSw3LjQ2LTE4Ljg3LDExLjkzLTI3LjksMTMuMzNWNDU5WiIgZmlsbD0iI2I4M2MzYSIvPjwvc3ZnPg=="

        # Response headers
        response_headers = {
            # 'Cache-Control': 's-maxage=3600, stale-while-revalidate=86400',
            'Content-Type': 'image/svg+xml',
        }

        # SVG template with optimized image rendering
        svg_template = f'''
        <svg width="600" height="220" viewBox="0 0 600 220" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <style>
                text {{ font-family: 'Verdana', 'Arial', sans-serif; }}
                .title {{ font-weight: bold; font-size: 20px; }}
                .label {{ font-size: 14px; fill: #9ca3af; }}
                .value {{ font-size: 16px; font-weight: 500; }}
                image {{ image-rendering: optimizeQuality; }}
            </style>
            
            <!-- Background -->
            <rect x="0" y="0" width="600" height="220" rx="12" fill="#121212"/>

            <!-- User Image -->
            <circle cx="520" cy="110" r="32" fill="#0451bf"/>
            <defs>
                <clipPath id="clipCircle">
                    <circle cx="520" cy="110" r="30"/>
                </clipPath>
            </defs>
            <image x="490" y="80" width="64" height="64" preserveAspectRatio="xMidYMid slice" 
                   clip-path="url(#clipCircle)" xlink:href="{encoded_image}"/>

            <!-- Username -->
            <text x="20" y="40" fill="#ffffff" class="title">{data['username']}'s Yogosha Stats</text>

            <!-- Stats Grid -->
            <g transform="translate(20, 70)">
                <!-- Row 1 -->
                <text x="0" y="0" fill="#eab308" class="label">🏅 Kudos</text>
                <text x="120" y="0" fill="#ffffff" class="value">{data['allTime']['kudos']}</text>
                
                <text x="220" y="0" fill="#22c55e" class="label">🎯 Acceptance</text>
                <text x="340" y="0" fill="#ffffff" class="value">{data['acceptanceRate']}%</text>

                <!-- Row 2 -->
                <text x="0" y="30" fill="#3b82f6" class="label">📄 Reports</text>
                <text x="120" y="30" fill="#ffffff" class="value">{data['totalReports']}</text>
                
                <text x="220" y="30" fill="#a855f7" class="label">✅ Avg Quality</text>
                <text x="340" y="30" fill="#ffffff" class="value">{data['averageReportsQuality']}/5</text>
            </g>

            <!-- Ranking Section -->
            <rect x="20" y="140" width="440" height="60" rx="6" fill="#1a1a1a"/>
            <text x="32" y="175" class="label">🏆 All Time Rank</text>
            <text x="160" y="175" fill="#ffffff" class="value">#{data['allTime']['rank']}</text>
            <text x="260" y="175" class="label">🕒 Last 30 Days</text>
            <text x="380" y="175" fill="#ffffff" class="value">#{data['last30DaysRank']}</text>
        </svg>
        '''

        return Response(svg_template, mimetype='image/svg+xml', headers=response_headers)
    
    return jsonify({'error': 'User not found'}), 404

if __name__ == '__main__':
    app.run(
        debug=False,
        host='0.0.0.0',
        port=5000
    )